import{excelDateToDate}from"../../scripts/scripts.js";export default async function decorate(u){let t=u.children[0].children[0].innerText,m=Number(u.children[0].children[1].innerText);var e=document.createElement("h2"),n=(e.classList.add("title"),e.append(t),document.createElement("div"));n.classList.add("heading-div"),n.append(e),u.innerHTML="";let o=document.createElement("div");o.classList.add("cards-div");var e=document.createElement("div"),a=(e.classList.add("pagination"),document.createElement("div"));a.classList.add("pagination-container");let d=document.createElement("div"),h=(d.classList.add("count-list"),document.createElement("div")),v=(h.classList.add("count-result"),a.append(d,h),e.append(a),u.append(n,o,e),1);a=await(await fetch("/query-index.json")).json();let L=a.data.filter(e=>e.category.includes(t));function C(){o.innerHTML="";var e=(v-1)*m,t=e+m,n=(L.slice(e,t).sort((e,t)=>new Date(e.publishedDate?.split("/").reverse().join("/"))-new Date(t.publishedDate?.split("/").reverse().join("/"))).forEach(({image:e,category:t,publishedDate:n,readTime:a,title:d,description:i,url:l})=>{var c=document.createElement("div");c.classList.add("card-div");let s=new URL(l).pathname;l=document.createElement("img"),l.src=e,l.alt="thumbnail",l.addEventListener("click",()=>{window.location.href=""+s}),c.appendChild(l),e=document.createElement("div"),e.classList.add("content-div"),c.appendChild(e),l=document.createElement("h3"),l.classList.add("card-title"),l.textContent=d,l.addEventListener("click",()=>{window.location.href=""+s}),e.appendChild(l),d=document.createElement("p"),d.classList.add("description"),d.textContent=i,e.appendChild(d),l=document.createElement("div"),l.classList.add("date-div"),e.appendChild(l),i=document.createElement("p"),i.classList.add("date"),i.textContent=n.includes("/")?n:excelDateToDate(n),l.appendChild(i),d=document.createElement("p");d.classList.add("read-time"),d.textContent=a+" min read",l.appendChild(d);let r=document.createElement("p");r.classList.add("category-list"),e.appendChild(r),t.split(",").forEach(e=>{var t=document.createElement("a");t.href="www.google.com",t.textContent=e,r.appendChild(t)}),o.appendChild(c)}),d.innerHTML="",document.createElement("p")),n=(n.textContent="Showing",d.appendChild(n),document.createElement("span")),e=(n.textContent=1+e+" - "+Math.min(t,L.length),d.appendChild(n),document.createElement("p")),t=(e.textContent="of",d.appendChild(e),document.createElement("span"));t.textContent=L.length,d.appendChild(t)}(10<a.data.length?function a(){let t=Math.ceil(L.length/m);function n(e,t){var n=document.createElement("button");return n.textContent=e,n.addEventListener("click",()=>{v=t,C(),a()}),t===v&&n.classList.add("active"),n}function e(){var e=document.createElement("button");return e.textContent="...",e.disabled=!0,e}h.innerHTML="";var d=document.createElement("p"),d=(d.innerHTML='<i class="fa-regular fa-chevrons-left"></i>',d.addEventListener("click",()=>{v=1,C(),a()}),h.appendChild(d),document.createElement("p"));if(d.innerHTML='<i class="fa-regular fa-chevron-left"></i>',d.addEventListener("click",()=>{1<v&&(--v,C(),a())}),h.appendChild(d),t<=5)for(let e=1;e<=t;e+=1)h.appendChild(n(e,e));else if(v<=3){for(let e=1;e<=3;e+=1)h.appendChild(n(e,e));h.appendChild(e()),h.appendChild(n(t,t))}else if(v>=t-2){h.appendChild(n(1,1)),h.appendChild(e());for(let e=t-2;e<=t;e+=1)h.appendChild(n(e,e))}else{h.appendChild(n(1,1)),h.appendChild(e());for(let e=v-1;e<=v+1;e+=1)h.appendChild(n(e,e));h.appendChild(e()),h.appendChild(n(t,t))}var d=document.createElement("p"),d=(d.innerHTML='<i class="fa-regular fa-chevron-right"></i>',d.addEventListener("click",()=>{v<t&&(v+=1,C(),a())}),h.appendChild(d),document.createElement("p")),d=(d.innerHTML='<i class="fa-regular fa-chevrons-right"></i>',d.addEventListener("click",()=>{v=t,C(),a()}),h.appendChild(d),C(),u.querySelector(".count-result p i.fa-chevrons-left").parentElement),i=u.querySelector(".count-result p i.fa-chevrons-right").parentElement,l=u.querySelector(".count-result p i.fa-chevron-left").parentElement,c=u.querySelector(".count-result p i.fa-chevron-right").parentElement,s=u.querySelector(".count-result button"),r=u.querySelectorAll(".count-result button"),o=u.querySelector(".count-result button:last-of-type"),p=r[1],r=r[r.length-2];s.classList.contains("active")?l.classList.add("dp-blur"):l.classList.remove("dp-blur"),s.classList.contains("active")||p.classList.contains("active")?d.classList.add("dp-none"):d.classList.remove("dp-none"),o.classList.contains("active")?c.classList.add("dp-blur"):c.classList.remove("dp-blur"),o.classList.contains("active")||r.classList.contains("active")?i.classList.add("dp-none"):i.classList.remove("dp-none")}:C)()}
import{getMetadata}from"../../scripts/aem.js";import{loadFragment}from"../fragment/fragment.js";export default async function decorate(){let a=document.querySelector("body");var e=getMetadata("/content-fragments/external-popup"),e=e?new URL(e,window.location).pathname:"/content-fragments/external-popup",e=await loadFragment(e),t=document.querySelector("body"),[e,n]=Array.from(e?.querySelector(".external-popup")?.children);let o=document.createElement("dialog");var r=document.createElement("button");let l=document.createElement("a");o.classList.add("external-popup"),r.setAttribute("type","button"),l.classList.add("external-popup-link"),o.innerHTML=e?.children[0]?.innerHTML,r.innerHTML=e?.children[1]?.querySelector("p")?.innerHTML,l.innerHTML=n?.children[0]?.querySelector("p")?.innerHTML,o.append(l),o.append(r),t.append(o),setTimeout(()=>{var e=document.querySelectorAll("a");let n,r="";e.forEach(t=>{r=t.getAttribute("href"),n=!1,(n=r&&0<r.length&&!r.startsWith("/")&&!r.startsWith("#")?new URL(t.getAttribute("href")).origin!==window.location.origin:n)&&t.addEventListener("click",e=>{e.preventDefault(),o.showModal(),l.setAttribute("href",t.getAttribute("href")),a.classList.add("external-popup-open")}),r=null}),o.addEventListener("click",()=>{o.close(),a.classList.remove("external-popup-open")})},1500)}
import{loadFragment}from"../fragment/fragment.js";function transformData(e){let c=[],s={};return e.forEach(e=>{var t=e["Parent Title"];let a=e.Title;var n=e["Sub Title"],r=e.Href,e=e.Description,t=(s[t]||(s[t]={title:t,children:[]},c.push(s[t])),s[t]);let l=t.children.find(e=>e.title===a);!l&&a&&(l={title:a,subChildren:[]},t.children.push(l)),n&&l.subChildren.push({title:n,href:r,description:e})}),c.map(e=>(0===e.children.length&&delete e.children,e))}function toggleMenu(e){e.target.closest(".collapse-bar").classList.toggle("active"),document.querySelector(".main-header-menu").classList.toggle("active")}function toggleMegaMenu(){document.querySelector(".collapse-bar").addEventListener("click",toggleMenu)}function toggleSearch(e){e.target.closest(".search-bar").classList.toggle("active")}function toggleSearchBar(){document.querySelector(".search-bar").addEventListener("click",toggleSearch)}async function renderheaderfargment(e){return(await loadFragment("/content-fragment/header/"+e))?.firstElementChild}function titletransformation(e){let t;return t=e?e.toLowerCase().replace(" ","-"):t}function transformBlogData(e){let t=[],a={};return e.forEach(e=>{e.Category&&!e.Article?a[e.Category]={title:e.Category,href:e["Category Link"]||"#"}:e.Category&&e.Article?(a[e.Category]||(a[e.Category]={title:e.Category,subChildren:[]}),a[e.Category].subChildren.push({title:e.Article,href:e["Article link"]||"#"})):!e.Category&&e.Article&&(a.Recipes||(a.Recipes={title:"Recipes",subChildren:[]}),a.Recipes.subChildren.push({title:e.Article,href:e["Article link"]||"#"}))}),Object.values(a).forEach(e=>{e.subChildren&&delete e.href,t.push(e)}),t}function renderBlogMenu(e){var t=document.createElement("div"),a=(t.className="blog-header-section",document.createElement("div")),n=(a.classList.add("blog-header-nav","blue-550"),document.createElement("div")),r=(n.className="blog-menu-block",document.createElement("div"));r.className="blog-header-menu";let l=document.createElement("div");l.className="blog-mobile-menu";var c=document.createElement("p"),s=(c.classList.add("blog-topics-label"),c.innerHTML="Topics",document.createElement("img")),i=(s.className="mobile-up-arrow",s.src="../../icons/mobile-up-arrow.svg",s.setAttribute("title","image"),document.createElement("img")),s=(i.className="mobile-down-arrow",i.src="../../icons/mobile-down-arrow.svg",i.setAttribute("title","image"),c.appendChild(s),c.appendChild(i),document.createElement("div")),i=(s.className="blog-menu-logo",document.createElement("div")),o=(i.classList.add("blog-menu-button","button-container"),document.createElement("div"));o.className="blog-menu-view";let d=document.createElement("ul");d.className="blog-menu-ul";fetch("/content-fragment/megamenu.json?sheet=blog").then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{e=transformBlogData(e.data),e=JSON.stringify(e,null,2);JSON.parse(e).forEach(e=>{var t=document.createElement("li"),a=(t.className="blog-menu-li",document.createElement("div"));if(a.className="blog-menu-link",t.prepend(a),e.subChildren&&0!==e.subChildren.length?t.addEventListener("click",e=>{e=e.target?.closest(".blog-menu-link");null!=e&&(e?.classList.contains("show-blog-menu")?e?.classList.remove("show-blog-menu"):(document.querySelectorAll(".blog-menu-link").forEach(e=>{e.classList.remove("show-blog-menu")}),e?.classList.add("show-blog-menu")))}):((l=document.createElement("a")).setAttribute("href",e.href),l.innerText=e.title,a.appendChild(l),d.append(t)),e.subChildren){var l=document.createElement("p"),a=(l.innerText=e.title,l.className="blogbarpara",a.appendChild(l),d.append(t),document.createElement("span")),c=(a.className="blog-menu-icon",document.createElement("img")),s=(c.className="blog-up-arrow",c.src="../../icons/mobile-up-arrow.svg",c.setAttribute("title","image"),document.createElement("img")),c=(s.className="blog-down-arrow",s.src="../../icons/mobile-down-arrow.svg",s.setAttribute("title","image"),a.appendChild(c),a.appendChild(s),l.appendChild(a),document.createElement("div"));c.className="blog-menu-item";let n=document.createElement("div"),r=(n.className="blog-submenu-ul",document.createElement("ul"));c.appendChild(n),t.append(c),e.subChildren.forEach(e=>{var t=document.createElement("li"),a=document.createElement("a");a.setAttribute("href",e.href),a.append(e.title),n.append(r),r.append(t),t.append(a)})}})}),l.addEventListener("click",()=>{l.classList.toggle("mobile-arrow"),document.querySelector(".blog-header-section").classList.add("blog-submenu-list")});var m=document.createElement("img"),u=(m.src="../../images/global/blog-logo.png",m.setAttribute("title","Wellmark Logo"),m.setAttribute("alt","Wellmark Logo"),m.className="blog-logo",document.createElement("p")),p=(u.classList.add("blog-label"),u.innerHTML="Getting the most from your health plan.",document.createElement("a"));p.textContent="Subscribe",p.setAttribute("href","#"),p.setAttribute("title","button"),p.classList.add("button","secondary"),t.append(a),a.append(n),t.append(l),l.append(c),t.append(r),e.append(t),n.append(s),n.append(i),s.append(m),s.append(u),i.append(p),r.append(o),o.append(d)}function renderMegaMenu(e,t){var a=document.createElement("div"),n=(a.className="main-header-section",document.createElement("div")),r=(n.className="main-header-nav",document.createElement("div")),l=(r.className="main-header-menu",document.createElement("div"));l.className="header-menu-block";let i=document.createElement("ul");i.className="header-menu-ul";JSON.parse(t).forEach(e=>{var n=document.createElement("li"),r=(n.className="header-menu-li",document.createElement("div"));if(r.className="header-menu-link",n.prepend(r),e.children&&0!==e.children.length?((l=document.createElement("p")).innerText=e.title,l.className="navbarpara",r.appendChild(l),r.addEventListener("click",e=>{e=e.target?.closest(".header-menu-link");e?.classList.contains("show-menu")?e?.classList.remove("show-menu"):(document.querySelectorAll(".header-menu-link").forEach(e=>{e.classList.remove("show-menu")}),e?.classList.add("show-menu"))})):((l=document.createElement("a")).setAttribute("href","#"),l.innerText=e.title,n.appendChild(l),n.addEventListener("click",()=>{document.querySelectorAll(".header-menu-link").forEach(e=>{e.classList.remove("show-menu")})}),l.addEventListener("click",e=>{document.querySelectorAll(".header-menu-link").forEach(e=>{e.classList.remove("show-menu")});e=e.target?.closest(".header-menu-link");e?.classList.contains("menu-active")?e?.classList.remove("menu-active"):(document.querySelectorAll(".header-menu-link").forEach(e=>{e.classList.remove("menu-active")}),e?.classList.add("menu-active"))}),r.append(l)),e.children){var l=document.createElement("span"),c=(l.className="header-menu-icon",document.createElement("img")),s=(c.className="menu-up-arrow",c.src="../../icons/up-arrow.svg",c.setAttribute("title","image"),document.createElement("img")),c=(s.className="menu-down-arrow",s.src="../../icons/down-arrow.svg",s.setAttribute("title","image"),l.appendChild(c),l.appendChild(s),r.appendChild(l),document.createElement("div"));c.className="header-menu-item";let a=document.createElement("div");a.className="header-submenu-ul";s=document.createElement("div");s.className="header-submenu-list";let t=document.createElement("div");t.className="menu-submenu-content",c.appendChild(s),s.appendChild(a),c.appendChild(t),n.append(c),e.children.forEach(e=>{let n=document.createElement("ul");var t=document.createElement("h4");t.append(e.title),n.append(t),a.append(n),e.subChildren&&e.subChildren.forEach(e=>{var t=document.createElement("li"),a=document.createElement("a");a.setAttribute("href",e.href),a.append(e.title),n.append(t),t.append(a),e.description&&((a=document.createElement("p")).append(e.description),t.append(a))})});try{renderheaderfargment(titletransformation(e?.title)).then(e=>{t.append(e)})}catch(e){console.log("error",e)}}i.appendChild(n)}),e.append(a),r.appendChild(l),e.append(r),a.append(n),l.append(i);var t=document.createElement("div"),e=(t.classList.add("main-header-logo"),document.createElement("a")),r=(e.setAttribute("href","/"),document.createElement("img")),a=(r.src="../../images/global/header-logo.png",r.setAttribute("title","Wellmark Logo"),r.setAttribute("alt","Wellmark Logo"),r.className="navbar-logo",n.append(t),t.append(e),e.append(r),document.createElement("div")),t=(a.className="main-header-right",document.createElement("div")),e=(t.classList.add("main-header-search"),document.createElement("div")),r=(e.className="main-header-search-box",document.createElement("span")),c=(r.classList.add("main-header-search-icon"),document.createElement("a")),s=(c.classList.add("search-anchor"),c.setAttribute("href","#"),c.setAttribute("title","search"),document.createElement("img")),o=(s.src="../../icons/search-icon.svg",s.setAttribute("title","image"),document.createElement("input")),d=(o.setAttribute("type","search"),o.className="search-input",o.setAttribute("placeholder","Search Wellmark"),document.createElement("img")),m=(d.classList.add("main-header-login-icon"),d.src="../../icons/login-btn.svg",d.setAttribute("title","image"),document.createElement("a")),d=(m.textContent="Log in / Register",m.setAttribute("href","#"),m.setAttribute("title","button"),m.classList.add("button","primary"),n.append(a),a.append(t),m.prepend(d),a.append(m),t.append(e),e.append(o),e.append(r),r.append(c),c.append(s),document.createElement("div")),a=(d.classList.add("collapse-bar"),n.prepend(d),setTimeout(()=>{toggleMegaMenu()},500),document.createElement("div")),m=(a.classList.add("search-bar"),n.append(a),setTimeout(()=>{toggleSearchBar()},500),document.createElement("div")),t=(m.classList.add("collapse-bar-menu"),document.createElement("div")),o=(t.classList.add("collapse-bar-close"),document.createElement("img")),e=(o.classList.add("collapse-btn"),o.src="../../icons/breadcrumbs-icon.svg",o.setAttribute("data-toggle","modal"),document.createElement("p")),r=(e.classList.add("collapse-menu"),e.innerHTML="Menu",document.createElement("img")),c=(r.src="../../icons/close-icon.svg",r.setAttribute("data-dismiss","modal"),r.classList.add("close-btn"),document.createElement("p")),s=(c.classList.add("collapse-close"),c.innerHTML="Close",d.append(m),m.prepend(o),m.append(e),d.append(t),t.prepend(r),t.append(c),document.createElement("img")),n=(s.classList.add("search-btn"),s.src="../../icons/search-icon.svg",document.createElement("p")),o=(n.classList.add("search-menu"),n.innerHTML="Search",a.append(s),a.append(n),document.createElement("div")),m=(o.classList.add("section-block","blue-550"),document.createElement("div")),e=(m.classList.add("section-login","button-container"),document.createElement("div")),d=(e.classList.add("section-register","button-container"),document.createElement("h4")),r=(d.classList.add("login-heading"),d.innerHTML="Log in to your account",document.createElement("p")),t=(r.classList.add("email-label"),r.innerHTML="User ID or Email (required)",document.createElement("input")),c=(t.className="input-login",t.setAttribute("type","text"),t.setAttribute("name","username"),document.createElement("p")),s=(c.classList.add("password-label"),c.innerHTML="Password (required)",document.createElement("input")),a=(s.className="input-password",s.setAttribute("type","password"),s.setAttribute("name","password"),document.createElement("a")),n=(a.textContent="Log in",a.setAttribute("href","#"),a.setAttribute("title","button"),a.classList.add("button","primary"),document.createElement("a")),u=(n.textContent="Register",n.setAttribute("href","#"),n.setAttribute("title","button"),n.classList.add("button","secondary"),document.createElement("p")),p=document.createElement("a"),h=(p.setAttribute("href","#"),p.classList.add("forget-user"),p.innerHTML="Forgot User ID or Email?",document.createElement("p")),g=document.createElement("a");g.setAttribute("href","#"),g.classList.add("forget-password"),g.innerHTML="Forgot Password?",l.appendChild(o),o.appendChild(m),m.appendChild(d),m.appendChild(r),m.appendChild(t),m.appendChild(c),m.appendChild(s),m.appendChild(a),o.appendChild(e),e.appendChild(n),e.appendChild(u),u.appendChild(p),e.appendChild(h),h.appendChild(g)}function generateUrl(e,t){var a=t-1,t=e.slice(0,t).join().replaceAll(",","/"),t=window.location.origin.concat("/",t);document.querySelector(`[data-breadcrumb-value='${e[a]}']`).setAttribute("href",t)}function fetchAndTransformData(t,a){fetch("/content-fragment/megamenu.json").then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok")}).then(e=>{e=transformData(e.data),e=JSON.stringify(e,null,2);"/src1/blog-menu"===window.location.pathname?(renderMegaMenu(t,e),renderBlogMenu(t),a.parentElement.classList.add("blog-menu")):renderMegaMenu(t,e)}).catch(e=>{console.error("There was a problem with the fetch operation:",e)})}function highlightEventlistener(t){setTimeout(()=>{var e=t.querySelectorAll(".header-menu-link");let a=window.location.pathname.split("/");e.forEach(e=>{var t=e.querySelector("a")?.textContent;a.includes(t?.toLowerCase())&&e.classList.add("menu-active")})},500)}export default async function decorate(e){e.textContent="";var t=document.createElement("div"),a=(t.className="main-header",fetchAndTransformData(t,e),document.createElement("div"));if(a.className="main-header-wrapper",a.append(t),e.append(a),highlightEventlistener(t),"true"===document.querySelector('meta[name="breadcrumbs"]').content.toLowerCase()){let a=window.location.pathname.split("/"),r=(a.shift(),document.createElement("ul"));r.classList.add("breadcrumb-ul"),document.querySelector("main").prepend(r);let n=a.length,l=(a.forEach(e=>{var t=document.createElement("li"),a=(t.classList.add("breadcrumb-list"),document.createElement("a")),n=e.replace(/-/g," "),n=(a.textContent=n,a.setAttribute("data-breadcrumb-value",e),t.append(a),r.append(t),document.createElement("img")),e=(n.src="/icons/breadcrumb-divider.svg",n.setAttribute("data-icon-name","divider"),n.className="divider-img",t.append(n),document.createElement("img"));e.src="/icons/breadcrumb-backarrow.svg",e.setAttribute("data-icon-name","divider"),e.className="backarrow",t.prepend(e)}),a.length);a.forEach((e,t)=>{t=l-t;t!==n&&generateUrl(a,t)})}}window.addEventListener("click",n=>{document.querySelectorAll(".header-menu-link").forEach(e=>{var t=n.target.closest(".header-menu-link"),a=n.target?.closest(".header-menu-li")?.querySelector(".header-menu-item");null===t&&void 0===a&&e.classList.remove("show-menu")})}),window.addEventListener("click",n=>{document.querySelectorAll(".blog-mobile-menu").forEach(e=>{var t=n.target.closest(".blog-header-menu"),a=n.target.closest(".blog-mobile-menu");null===t&&null===a&&e.classList.remove("mobile-arrow")})}),window.addEventListener("click",r=>{var e=document.querySelectorAll(".blog-menu-link");let l=r.target.classList?.contains("blog-menu-li");e.forEach(e=>{var t=r.target.closest(".blog-menu-link"),a=r.target?.closest(".blog-menu-li")?.querySelector(".blog-menu-item"),n=null===t&&void 0===a,t=null===t&&void 0===a||"DIV"===r.target.tagName||l;1024<window.innerWidth?n&&e.classList.remove("show-blog-menu"):t&&e.classList.remove("show-blog-menu")})}),window.addEventListener("scroll",()=>{var e=window.scrollY,t=window.matchMedia("(max-width: 1024px)").matches?60:150,a=document.querySelector(".blog-header-section"),n=document.querySelector(".collapse-bar"),r=document.querySelector(".main-header-menu");t<e?(a?.classList.add("menu-sticky"),n.classList.remove("active"),r.classList.remove("active")):a?.classList.remove("menu-sticky")});
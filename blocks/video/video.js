let prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)");function embedYoutube(e,t,o){var i=new URLSearchParams(e.search);let n="",d=((o||t)&&(n="&"+Object.entries({autoplay:t?"1":"0",mute:o?"1":"0",controls:o?"0":"1",disablekb:o?"1":"0",loop:o?"1":"0",playsinline:o?"1":"0"}).map(([e,t])=>e+"="+encodeURIComponent(t)).join("&")),i.get("v")?encodeURIComponent(i.get("v")):"");t=e.pathname,e.origin.includes("youtu.be")&&([,d]=e.pathname.split("/")),o=document.createElement("div");return o.innerHTML=`<div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;">
      <iframe src="https://www.youtube.com${d?`/embed/${d}?rel=0&v=`+d+n:t}" style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;" 
      allow="autoplay; fullscreen; picture-in-picture; encrypted-media; accelerometer; gyroscope; picture-in-picture" allowfullscreen="" scrolling="no" title="Content from Youtube" loading="lazy"></iframe>
    </div>`,o.children.item(0)}function embedVimeo(e,t,o){var[,e]=e.pathname.split("/");let i="";(o||t)&&(i="?"+Object.entries({autoplay:t?"1":"0",background:o?"1":"0"}).map(([e,t])=>e+"="+encodeURIComponent(t)).join("&"));t=document.createElement("div");return t.innerHTML=`<div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;">
      <iframe src="https://player.vimeo.com/video/${e}${i}" 
      style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;" 
      frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen  
      title="Content from Vimeo" loading="lazy"></iframe>
    </div>`,t.children.item(0)}function getVideoElement(e,t,o){let i=document.createElement("video");i.setAttribute("controls",""),t&&i.setAttribute("autoplay",""),o&&(i.setAttribute("loop",""),i.setAttribute("playsinline",""),i.removeAttribute("controls"),i.addEventListener("canplay",()=>{i.muted=!0,t&&i.play()}));o=document.createElement("source");return o.setAttribute("src",e),o.setAttribute("type","video/"+e.split(".").pop()),i.append(o),i}let loadVideoEmbed=(e,t,o,i)=>{var n,d,a;"true"!==e.dataset.embedLoaded&&(n=new URL(t),d=t.includes("youtube")||t.includes("youtu.be"),a=t.includes("vimeo"),d?(d=embedYoutube(n,o,i),e.append(d),d.querySelector("iframe").addEventListener("load",()=>{e.dataset.embedLoaded=!0})):a?(d=embedVimeo(n,o,i),e.append(d),d.querySelector("iframe").addEventListener("load",()=>{e.dataset.embedLoaded=!0})):(a=getVideoElement(t,o,i),e.append(a),a.addEventListener("canplay",()=>{e.dataset.embedLoaded=!0})))};export default async function decorate(o){var t=o.querySelector("picture");let i=o.querySelector("a").href,n=(o.textContent="",o.dataset.embedLoaded=!1,o.classList.contains("autoplay"));if(t){o.classList.add("placeholder");let e=document.createElement("div");e.className="video-placeholder",e.append(t),n||(e.insertAdjacentHTML("beforeend",'<div class="video-placeholder-play"><button type="button" title="Play"></button></div>'),e.addEventListener("click",()=>{e.remove(),loadVideoEmbed(o,i,!0,!1)})),o.append(e)}if(!t||n){let t=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&(t.disconnect(),e=n&&!prefersReducedMotion.matches,loadVideoEmbed(o,i,e,n))});t.observe(o)}}
import{excelDateToDate}from"../../scripts/scripts.js";export default async function decorate(u){let t=u.children[1].children[1].innerText;var e=u.children[0].children[0].innerText;let m=Number(u.children[1].children[0].innerText);var n=u.children[0].children[1].innerHTML,a=document.createElement("h2"),d=(a.classList.add("title"),document.createElement("span")),n=(d.classList.add("text-icon"),d.innerHTML=n,a.append(e),document.createElement("div"));n.classList.add("heading-div"),n.append(a,d),u.innerHTML="";let s=document.createElement("div");s.classList.add("cards-div");e=document.createElement("div"),e.classList.add("pagination"),a=document.createElement("div");a.classList.add("pagination-container");let i=document.createElement("div"),h=(i.classList.add("count-list"),document.createElement("div")),v=(h.classList.add("count-result"),a.append(i,h),e.append(a),u.append(n,s,e),1);d=await(await fetch("/query-index.json")).json();let L=d.data.filter(e=>e.category.includes(t));function E(){s.innerHTML="";var e=(v-1)*m,t=e+m,n=(L.slice(e,t).sort((e,t)=>new Date(e.publishedDate?.split("/").reverse().join("/"))-new Date(t.publishedDate?.split("/").reverse().join("/"))).forEach(({image:e,category:t,publishedDate:n,readTime:a,title:d,url:i})=>{var l=document.createElement("div");l.classList.add("card-div");let c=new URL(i).pathname;i=document.createElement("img"),i.src=e,i.alt="thumbnail",i.addEventListener("click",()=>{window.location.href=""+c}),l.appendChild(i),e=document.createElement("div"),e.classList.add("content-div"),l.appendChild(e),i=document.createElement("h3"),i.classList.add("card-title"),i.textContent=d,i.addEventListener("click",()=>{window.location.href=""+c}),e.appendChild(i),d=document.createElement("div"),d.classList.add("date-div"),e.appendChild(d),i=document.createElement("p"),i.classList.add("date"),i.textContent=n.includes("/")?n:excelDateToDate(n),d.appendChild(i),n=document.createElement("p");n.classList.add("read-time"),n.textContent=a+" min read",d.appendChild(n);let r=document.createElement("p");r.classList.add("category-list"),e.appendChild(r),t.split(",").forEach(e=>{var t=document.createElement("a");t.href="www.google.com",t.textContent=e,r.appendChild(t)}),s.appendChild(l)}),i.innerHTML="",document.createElement("p")),n=(n.textContent="Showing",i.appendChild(n),document.createElement("span")),e=(n.textContent=1+e+" - "+Math.min(t,L.length),i.appendChild(n),document.createElement("p")),t=(e.textContent="of",i.appendChild(e),document.createElement("span"));t.textContent=L.length,i.appendChild(t)}(10<d.data.length?function a(){let t=Math.ceil(L.length/m);function n(e,t){var n=document.createElement("button");return n.textContent=e,n.addEventListener("click",()=>{v=t,E(),a()}),t===v&&n.classList.add("active"),n}function e(){var e=document.createElement("button");return e.textContent="...",e.disabled=!0,e}h.innerHTML="";var d=document.createElement("p"),d=(d.innerHTML='<i class="fa-regular fa-chevrons-left"></i>',d.addEventListener("click",()=>{v=1,E(),a()}),h.appendChild(d),document.createElement("p"));if(d.innerHTML='<i class="fa-regular fa-chevron-left"></i>',d.addEventListener("click",()=>{1<v&&(--v,E(),a())}),h.appendChild(d),t<=5)for(let e=1;e<=t;e+=1)h.appendChild(n(e,e));else if(v<=3){for(let e=1;e<=3;e+=1)h.appendChild(n(e,e));h.appendChild(e()),h.appendChild(n(t,t))}else if(v>=t-2){h.appendChild(n(1,1)),h.appendChild(e());for(let e=t-2;e<=t;e+=1)h.appendChild(n(e,e))}else{h.appendChild(n(1,1)),h.appendChild(e());for(let e=v-1;e<=v+1;e+=1)h.appendChild(n(e,e));h.appendChild(e()),h.appendChild(n(t,t))}var d=document.createElement("p"),d=(d.innerHTML='<i class="fa-regular fa-chevron-right"></i>',d.addEventListener("click",()=>{v<t&&(v+=1,E(),a())}),h.appendChild(d),document.createElement("p")),d=(d.innerHTML='<i class="fa-regular fa-chevrons-right"></i>',d.addEventListener("click",()=>{v=t,E(),a()}),h.appendChild(d),E(),u.querySelector(".count-result p i.fa-chevrons-left").parentElement),i=u.querySelector(".count-result p i.fa-chevrons-right").parentElement,l=u.querySelector(".count-result p i.fa-chevron-left").parentElement,c=u.querySelector(".count-result p i.fa-chevron-right").parentElement,r=u.querySelector(".count-result button"),s=u.querySelectorAll(".count-result button"),o=u.querySelector(".count-result button:last-of-type"),p=s[1],s=s[s.length-2];r.classList.contains("active")?l.classList.add("dp-blur"):l.classList.remove("dp-blur"),r.classList.contains("active")||p.classList.contains("active")?d.classList.add("dp-none"):d.classList.remove("dp-none"),o.classList.contains("active")?c.classList.add("dp-blur"):c.classList.remove("dp-blur"),o.classList.contains("active")||s.classList.contains("active")?i.classList.add("dp-none"):i.classList.remove("dp-none")}:E)()}
let{computePosition,flip,shift,offset,arrow}=window.FloatingUIDOM,tooltipComponents=Array.from(document.querySelectorAll(".tooltip")),tooltipsBlocksArr=[],tooltipsMainArr=[],areTooltipsCounted=!1,updateTooltipPosition=l=>{computePosition(l.link,l.tooltipEl,{placement:"top",middleware:[offset(6),flip(),shift({padding:5}),arrow({element:l.arrowEl})]}).then(({x:t,y:o,placement:i,middlewareData:e})=>{Object.assign(l.tooltipEl.style,{left:t+"px",top:o+"px"});var{x:t,y:o}=e.arrow,e={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];Object.assign(l.arrowEl.style,{left:t?t+"px":"",top:o?o+"px":"",right:"",bottom:"",[e]:"-4px"})})},hideTooltip=t=>{t.tooltipEl.classList.remove("tooltip-wrapper-active"),t.isActive=!1},showTooltip=o=>{tooltipsMainArr.forEach(t=>{o.index!==t.index&&hideTooltip(t)}),o.tooltipEl.classList.add("tooltip-wrapper-active"),o.isActive=!0,updateTooltipPosition(o)},initializeTooltips=()=>{var t=Array.from(document.querySelectorAll('a[href^="#tooltip-"]'));let i=[],e;t.forEach(o=>{e=tooltipsBlocksArr.find(t=>t.classList.contains(o.getAttribute("href").substring(1)));var t=document.createElement("button"),t=(t.innerHTML=o.innerHTML,t.dataset.href=o.href,t.className=o.className+" tooltip-btn-hidden",t.style.cssText=o.style.cssText,o.replaceWith(t),{link:t,tooltipEl:e?e.parentNode:null});i.push(t)}),setTimeout(()=>{i.forEach((o,t)=>{var i;o.tooltipEl&&o.link&&(i=`tooltip_${Math.random().toString(16).slice(2)}_`+t,o.link.classList.add("tooltip-link"),o.link.setAttribute("aria-describedby",i),o.tooltipEl.setAttribute("role","tooltip"),o.tooltipEl.setAttribute("id",i),(i=document.createElement("div")).classList.add("tooltip-arrow"),o.tooltipEl.append(i),o.arrowEl=i,o.index=t,o.isActive=!1,updateTooltipPosition(o),o.link.classList.remove("tooltip-btn-hidden"),o.link.addEventListener("click",t=>{t.stopPropagation(),showTooltip(o)}),tooltipsMainArr.push(o))}),document.addEventListener("click",o=>{tooltipsMainArr.forEach(t=>{!o.composedPath().includes(t.tooltipEl)&&t.isActive&&hideTooltip(t)})})},100)};export default async function decorate(t){computePosition&&flip&&shift&&offset&&arrow&&(t=t,tooltipsBlocksArr.push(t),areTooltipsCounted||tooltipComponents.length!==tooltipsBlocksArr.length||(areTooltipsCounted=!0,initializeTooltips()))}